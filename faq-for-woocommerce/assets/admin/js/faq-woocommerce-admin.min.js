"use strict";jQuery(document).ready(function(r){jQuery.fn.putCursorAtEnd=function(){return this.each(function(){var e,t=r(this),o=this;t.is(":focus")||t.focus(),o.setSelectionRange?(e=2*t.val().length,setTimeout(function(){o.setSelectionRange(e,e)},1)):t.val(t.val()),this.scrollTop=999999})},r.faq_woocommerce={ajax_url:"",init:function(){this.ajax_url=ffw_admin.ajaxurl;var n,t=r("#ffw-popup-form-wrapper .ffw-modal-frame");r(".ffw-display_in_pages-select2").select2({placeholder:"Select Woo Pages"}),r(".ffw-category-select2").select2({placeholder:"Select categories"}),r(".ffw-tag-select2").select2({placeholder:"Select tags"}),"product"===ffw_admin.current_post_type&&"edit"===ffw_admin.current_page_action&&((n=r(".ffw_search")).select2({placeholder:"Select a faq post",allowClear:!0,minimumResultsForSearch:1/0}),n.on("select2:select",function(e){var t=r("#ffw_product_page_id").val(),o=ffw_admin.nonce,a=r(this).val(),f=r("#ffw_products").val(),f=JSON.parse(f);r("#ffw_product_data .ffw-product-loader").addClass("ffw-visible"),wp.ajax.post("ffw_insert_data_from_search",{nonce:o,faq_insert_search_data:{product_id:t,new_item_id:a,product_faqs:f}}).then(function(e){console.log("success......."),console.log(e.message),console.log(e.updated_data),r("#ffw_products").val(JSON.stringify(e.updated_data)),r(".ffw-body").html(e.faq_body),r("#ffw_product_data .ffw-product-loader").removeClass("ffw-visible"),r.faq_woocommerce.ffw_sorting_data(),n.val("").trigger("change")}).fail(function(e){console.log("erorr......."),console.log(e),r("#ffw_product_data .ffw-product-loader").removeClass("ffw-visible"),n.val("").trigger("change")})}),r(".ffw-sortable").sortable({axis:"y",update:function(e,t){var o=r(this).sortable("serialize");console.log(o)}})),ffw_admin.current_page_action&&console.log(ffw_admin.current_page_action),r(".ffw-role-select").select2({placeholder:"Select Roles",allowClear:!0}),r(document).on("click","#ffw-product-form-header .ffw-add-new",this.openPopupForm),r(document).on("click",'#ffw-popup-form-wrapper .ffw-modal-close, #ffw-popup-form-wrapper input[type="button"]',this.closePopupForm),t.bind("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){t.hasClass("state-leave")&&t.removeClass("state-leave")}),r(".ffw_question_text_color").wpColorPicker(),r(".ffw_question_bg_color").wpColorPicker(),r(".ffw_question_bg_secondary_color").wpColorPicker(),r(".ffw_question_border_color").wpColorPicker(),r(".ffw_answer_text_color").wpColorPicker(),r(".ffw_answer_bg_color").wpColorPicker(),r(".ffw_answer_border_color").wpColorPicker(),r(".ffw-comments-date-time-color").wpColorPicker(),r(".ffw-comments-content-color").wpColorPicker(),r(".ffw-comments-author-name-color").wpColorPicker(),r(".ffw-comments-submit-button-text-color").wpColorPicker(),r(".ffw-comments-reply-button-text-color").wpColorPicker(),r(".ffw-comments-submit-button-bg-color").wpColorPicker(),r(".ffw-comments-form-border-color").wpColorPicker(),r(".ffw-comments-form-title-color").wpColorPicker(),r(".ffw-comments-reply-form-title-color").wpColorPicker(),r(".ffw-comments-reply-form-submit-button-color").wpColorPicker(),r(".ffw-comments-reply-form-submit-button-bg-color").wpColorPicker(),r(".ffw-comments-reply-form-border-color").wpColorPicker(),r(".ffw-comments-reply-form-submit-button-text-color").wpColorPicker(),r(document).on("click","#ffw_product_data .ffw-metabox h3",this.toggleOptionMetabox),r(document).on("click","#ffw_modal_submit",this.submitModalForm),r(document).on("click","#ffw-delete-all-faq",this.deleteAllFaq),r(document).on("click","#ffw-product-form-header .ffw-single-delete-btn",this.deleteSingleFaq),r(document).on("click","#ffw-product-form-header .ffw-single-edit-btn",this.openUpdatePopupForm),r(document).on("click",".ffw-layout-select",this.changePreviewImage),r(document).on("change",".ffw_question_font_size",this.changeQuestionRange),r(document).on("change",".ffw_answer_font_size",this.changeAnswerRange),r(document).on("click",".ffw-setting-wrapper .ffw-get-pro-wrapper",this.showProPopup),r(document).on("click","#ffw-popup-close",this.hideProPopup),r(document).on("click",".ffw-discount-notice .notice-dismiss",this.hideDiscountNotice),r(document).on("click",".ffw-template-preview-button",this.showTemplatePopup),r(document).on("click",".ffw-template-popup-close-button",this.hideTemplatePopup),r(document).on("click",".ffw-template-active-button",this.activateTemplate),r(document).on("click",".ffw-ai-result-select-all-btn",this.ai_faqs_select_all),r(document).on("click",".ffw-ai-result-item-group input[type=checkbox]",this.ai_faqs_on_select),r(document).on("click",".ffw-ai-back-btn",this.ai_back_to),r(document).on("submit",".ffw-ai-faqs-form",this.ai_faqs_generator),r(document).on("submit",".ffw-ai-result-form",this.ai_faqs_insert),this.ffw_sorting_data()},hideDiscountNotice:function(e){e.preventDefault(),console.log("Discounted...");e=ffw_admin.nonce;wp.ajax.post("ffw_hide_discount_notice",{data:{nonce:e}}).then(function(e){console.log(e)}).fail(function(e){console.log("erorr during discounted notice dismissal.......")})},openPopupForm:function(e){e.preventDefault(),r("#ffw_modal_submit").show(),r("#ffw_modal_update").hide();e=r(".ffw-modal-frame");r(".modal-overlay").addClass("state-show"),e.removeClass("state-leave").addClass("state-appear"),setTimeout(function(){r("#ffw-popup-form-wrapper .ffw-popup-form-add-question").focus()},500),r("#ffw-popup-form-wrapper .ffw-popup-form-add-question").val(""),jQuery("#wp-ffw_popup_answer-wrap").hasClass("tmce-active")&&tinymce.get("ffw_popup_answer").setContent("")},closePopupForm:function(e){e.preventDefault();e=r(".ffw-modal-frame");r(".modal-overlay").removeClass("state-show"),e.removeClass("state-appear").addClass("state-leave")},toggleOptionMetabox:function(e){e.preventDefault(),r(this).parent(".ffw-metabox").toggleClass("closed").toggleClass("open"),r(event.target).filter(":input, .ffw-sort, .ffw-handle-item").length||r(this).next(".ffw-metabox-content").stop().slideToggle()},submitModalForm:function(e){e.preventDefault(),r(".ffw-modal-frame").removeClass("state-appear"),r(".modal-overlay ").removeClass("state-show"),r("#ffw_product_data .ffw-product-loader").addClass("ffw-visible");var e=r("#ffw-popup-form-wrapper .ffw-popup-form-add-question"),t="",o=(jQuery("#wp-ffw_popup_answer-wrap").hasClass("tmce-active")&&(t=tinyMCE.activeEditor.getContent()),r("#ffw_product_page_id").val()),a=r("#ffw_products").val(),a=JSON.parse(a),f=ffw_admin.nonce,e=e.val();wp.ajax.post("ffw_insert_new_faq",{nonce:f,faq_data:{question:e,answer:t,product_id:o,faq_list:a}}).then(function(e){r("#ffw_products").val(JSON.stringify(e.faq_data)),r(".ffw-body").html(e.faq),r(".ffw-popup-form-add-question").val(""),r(".ffw-popup-form-add-answer").val(""),r("#ffw_product_data .ffw-product-loader").removeClass("ffw-visible"),r.faq_woocommerce.ffw_sorting_data()}).fail(function(e){console.log("erorr......."),console.log(e),r.faq_woocommerce.ffw_sorting_data()})},deleteAllFaq:function(e){e.preventDefault();var e=r("#ffw_product_page_id").val(),t=r("#ffw_products").val(),t=JSON.parse(t),o=ffw_admin.nonce,a=(void 0!==t&&0!==t.length||console.log(t),{product_id:e});Swal.fire({title:"Delete all the faqs?",icon:"question",showCancelButton:!0}).then(function(e){e.isConfirmed&&wp.ajax.post("ffw_delete_all_faqs",{nonce:o,faq_delete_data:a}).then(function(e){e.success&&(r(".ffw-metabox-item").hide(),r("#ffw_products").val(JSON.stringify([])),Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:"success",title:"Delete successfull."}))}).fail(function(e){console.log("erorr of delete faq......."),console.log(e)})})},deleteSingleFaq:function(e){e.preventDefault(),e.stopPropagation();var t=r("#ffw_product_page_id").val(),o=r("#ffw_products").val(),o=JSON.parse(o),a=ffw_admin.nonce,f=r(this).parents(".ffw-metabox-item"),n=r(this).attr("rel");Swal.fire({title:"Are you sure to Delete?",icon:"question",showCancelButton:!0}).then(function(e){e.isConfirmed&&(-1<(e=o.indexOf(n))&&o.splice(e,1),e={product_id:t,updated_faq_list:o},f.hide(),wp.ajax.post("ffw_delete_single_faq",{nonce:a,faq_updated_data:e}).then(function(e){console.log("success......."),console.log(e),console.log(JSON.stringify(e.update_faq_list)),r("#ffw_products").val(JSON.stringify(e.update_faq_list))}).fail(function(e){console.log("erorr of delete faq......."),console.log(e)}))})},openUpdatePopupForm:function(e){e.preventDefault(),e.stopPropagation(),r("#ffw_modal_submit").hide(),r("#ffw_modal_update").show();var e=r(".ffw-modal-frame"),e=(r(".modal-overlay").addClass("state-show"),e.removeClass("state-leave").addClass("state-appear"),r(this).attr("rel")),e=(r("#ffw-current-ques-id").val(e),r(this).parent("h3").find("strong").html()),t=r(this).parents(".ffw-metabox-item").find(".ffw-metabox-content .data div").html();r("#ffw-popup-form-wrapper .ffw-popup-form-add-question").val(e),setTimeout(function(){r("#ffw-popup-form-wrapper .ffw-popup-form-add-question").focus().putCursorAtEnd()},500),jQuery("#wp-ffw_popup_answer-wrap").hasClass("tmce-active")&&tinymce.get("ffw_popup_answer").setContent(t)},changePreviewImage:function(e){var t=r(this).val();r(".ffw-setting-layout img").each(function(e){r(this).data("layout")===parseInt(t)?r(this).removeClass("ffw-hide").addClass("ffw-visible"):r(this).removeClass("ffw-visible").addClass("ffw-hide")})},changeQuestionRange:function(e){var t=r(this).val();r(".ffw_question_font_size_label").text(t+"px")},changeAnswerRange:function(e){var t=r(this).val();r(".ffw_answer_font_size_label").text(t+"px")},ffw_sorting_data:function(e){r(".ffw-sortable").sortable({cursor:"move",axis:"y",handle:".ffw-sort-icon",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,stop:function(){var e=[];r(".ffw-sortable .ffw-metabox-item").each(function(){e.push(r(this).attr("id"))}),r.faq_woocommerce.ffw_sortable(e)}})},ffw_sortable:function(t){var e=r("#ffw_product_page_id").val(),o=ffw_admin.nonce;wp.ajax.post("ffw_sort_faq_data",{nonce:o,faq_sorted_data:{product_id:e,faq_sorted_list:t}}).then(function(e){console.log("success......."),console.log(e.message),r("#ffw_products").val(JSON.stringify(t))}).fail(function(e){console.log("erorr......."),console.log(e)})},showProPopup:function(e){e.preventDefault(),r(".ffw-go-pro-modal").removeClass("ffw-hide")},hideProPopup:function(e){e.preventDefault(),r(".ffw-go-pro-modal").addClass("ffw-hide")},showTemplatePopup:function(e){e.preventDefault();e=r(this).parents(".ffw-item-wrapper").find(".ffw-layout-img img").attr("src");r(".ffw-template-popup-inner img").attr("src",e),r("body").addClass("ffw-overflow-hidden"),r(".ffw-active").removeClass("ffw-active"),r(".ffw-template-popup-wrapper").addClass("ffw-active")},hideTemplatePopup:function(e){e.preventDefault(),r("body").removeClass("ffw-overflow-hidden"),r(".ffw-template-popup-wrapper").removeClass("ffw-active")},activateTemplate:function(e){e.preventDefault(),r(".ffw-item-wrapper").removeClass("ffw-template-active"),r(this).parents(".ffw-item-wrapper").addClass("ffw-template-active");var e=r(this).data("templte_id"),t=ffw_admin.nonce;r('input[name="ffw_general_settings[ffw_layout]"]').val(e),r.ajax({method:"POST",url:ffw_admin.ajaxurl,dataType:"json",data:{action:"ffw_activate_template",nonce:t,template_id:e}}).done(function(e){console.log("success.......")})},ai_faqs_select_all:function(e){console.log("ai_faqs_select_all");var t=r(".ffw-ai-result-item-group input[type=checkbox]");console.log(t),e.target.checked?t.attr("checked",!0):t.attr("checked",!1),r.faq_woocommerce.ai_faqs_selected_item_count()},ai_faqs_selected_item_count:function(e){var t=r(".ffw-ai-result-item-group input[type=checkbox]:checked"),o=r(".ffw-ai-selected-count");console.log(t),0<t.length?(t=t.length+" Items Selected",o.text(t)):(console.log(ffw_admin.strings.ai_item_selected),o.text(ffw_admin.strings.ai_item_selected))},ai_faqs_on_select:function(e){e.target.checked,r.faq_woocommerce.ai_faqs_selected_item_count()},ai_back_to:function(e){e.preventDefault(),r(".ffw-ai-result-content").hide(),document.querySelector(".ffw-ai-faqs-form button[type=submit] span").innerText="Generate FAQs",r(".ffw-ai-form-content").fadeIn()},ai_faqs_generator:function(e){e.preventDefault();var t=new FormData(e.target),o=ffw_admin.nonce;e.target.querySelector("button[type=submit] span").innerText="Generating...",t.append("action","ffw_generate_ai_faqs"),t.append("nonce",o),console.log("ai faqs generation.."),r.ajax({method:"POST",url:ffw_admin.ajaxurl,dataType:"json",processData:!1,contentType:!1,data:t}).done(function(e){console.log(e),0<e.data.html.length&&(r(".ffw-ai-result-fields").html(e.data.html),r(".ffw-ai-form-content").fadeOut(),r(".ffw-ai-result-content-header h3").text('10 results for "'+e.data.product_title+'"'),r(".ffw-ai-result-content").addClass("ffw-ai-result-content-active")),e.data.product_id&&r(".ffw-ai-result-form").attr("product_id",e.data.product_id)})},ai_faqs_insert:function(e){e.preventDefault();var t=new FormData(e.target),o=ffw_admin.nonce,e=(e.target.querySelector("button[type=submit] span:last-child").innerText="Inserting...",r(".ffw-ai-result-form").attr("product_id"));t.append("action","ffw_insert_ai_faqs"),t.append("ffw_insert_ai_product_id",e),t.append("nonce",o),r.ajax({method:"POST",url:ffw_admin.ajaxurl,dataType:"json",processData:!1,contentType:!1,data:t}).done(function(e){e.success&&(window.location.href=ffw_admin.faw_list_page_url)})}},r.faq_woocommerce.init()});
//# sourceMappingURL=faq-woocommerce-admin.min.js.map
