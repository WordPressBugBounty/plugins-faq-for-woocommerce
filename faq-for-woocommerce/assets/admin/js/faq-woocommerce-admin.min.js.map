{"version":3,"sources":["faq-woocommerce-admin.js"],"names":["jQuery","document","ready","$","fn","putCursorAtEnd","this","setTimeout","$el","focus","is","el","length","len","val","setSelectionRange","scrollTop","faq_woocommerce","placeholder","ajax_url","ffw_admin","new_item_id","$modal","select2","search_dom","minimumResultsForSearch","__ffw_product_id","__ffw_products_faqs","allowClear","e","nonce","JSON","parse","log","addClass","ajax","post","faq_data","then","response","error","console","stringify","removeClass","data","trigger","fail","sortable","axis","update","event","hasClass","on","wpColorPicker","openPopupForm","closePopupForm","bind","toggleOptionMetabox","hideDiscountNotice","submitModalForm","preventDefault","deleteAllFaq","deleteSingleFaq","openUpdatePopupForm","changePreviewImage","changeQuestionRange","showProPopup","hideProPopup","showTemplatePopup","hideTemplatePopup","activateTemplate","copyToClickShortcode","ai_faqs_select_all","ai_faqs_on_select","$overlay","ai_back_to","ai_faqs_generator","ai_faqs_insert","ffw_sorting_data","parent","target","show","hide","__ffw_question","ffw_answer_text","setContent","ffw_question_val","toggleClass","filter","next","stop","slideToggle","tinyMCE","activeEditor","total_product","wp","faq_delete_data","showCancelButton","html","isConfirm","toast","timer","Swal","fire","icon","current_faq_id","isConfirmed","Toast","mixin","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","current_faq","__ffw_id","attr","__ffw_old_answer","title","index","indexOf","splice","faq_updated_data","image_layout","question_range_val","answer_range_val","opacity","selectedData","find","parents","get","each","item","parseInt","text","handle","forcePlaceholderSize","helper","push","ffw_sortable","dataType","template_id","$tooltip","shortcode","navigator","window","isSecureContext","ai_result_checkbox","img_url","ai_selected_checkbox","item_count_text","checked","method","innerText","action","done","append","processData","closest","formData","writeText","$temp","execCommand","submitBtn","product_id","contentType","items_count","strings","querySelector","fadeIn","FormData","url","fadeOut","product_title","location","href","init"],"mappings":"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","file":"faq-woocommerce-admin.min.js","sourcesContent":["/**\n * Woocommerce FAQ Admin JS\n *\n * Copyright (c) 2019 wpfeel\n * Licensed under the GPLv2+ license.\n */\njQuery(document).ready(function ($) {\n\t'use strict';\n\n    jQuery.fn.putCursorAtEnd = function() {\n\n        return this.each(function() {\n\n            // Cache references\n            var $el = $(this),\n                el = this;\n\n            // Only focus if input isn't already\n            if (!$el.is(\":focus\")) {\n                $el.focus();\n            }\n\n            // If this function exists... (IE 9+)\n            if (el.setSelectionRange) {\n\n                // Double the length because Opera is inconsistent about whether a carriage return is one character or two.\n                var len = $el.val().length * 2;\n\n                // Timeout seems to be required for Blink\n                setTimeout(function() {\n                    el.setSelectionRange(len, len);\n                }, 1);\n\n            } else {\n\n                // As a fallback, replace the contents with itself\n                // Doesn't work in Chrome, but Chrome supports setSelectionRange\n                $el.val($el.val());\n\n            }\n\n            // Scroll to the bottom, in case we're in a tall textarea\n            // (Necessary for Firefox and Chrome)\n            this.scrollTop = 999999;\n\n        });\n\n    };\n\n\t$.faq_woocommerce = {\n        ajax_url: '',\n\t\tinit: function () {\n            //assign ajax url\n            this.ajax_url = ffw_admin.ajaxurl;\n\n            // modal form\n            var $modal = $('#ffw-popup-form-wrapper .ffw-modal-frame');\n\n            // display in pages.\n            $('.ffw-display_in_pages-select2').select2({\n                placeholder: \"Select Woo Pages\",\n                // allowClear: true\n            });\n            \n            // faq categories.\n            $('.ffw-category-select2').select2({\n                placeholder: \"Select categories\",\n                // allowClear: true\n            });\n            \n            // faq tags.\n            $('.ffw-tag-select2').select2({\n                placeholder: \"Select tags\",\n                // allowClear: true\n            });\n\n            if( \"product\" === ffw_admin.current_post_type && \"edit\" === ffw_admin.current_page_action ) {\n\n                //ffw select2 init\n                let search_dom = $('.ffw_search');\n                search_dom.select2({\n                    placeholder: \"Select a faq post\",\n                    allowClear: true,\n                    minimumResultsForSearch: Infinity\n                });\n\n                search_dom.on(\"select2:select\", function(e) {\n                    // console.log(\"hello puishak\");\n\n                    let __ffw_product_id    = $('#ffw_product_page_id').val();\n                    let nonce               = ffw_admin.nonce;\n                    let new_item_id         = $(this).val();\n                    let __ffw_products_faqs  = $('#ffw_products').val();\n                    __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n\n                    //show loader\n                    $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n                    //insert faq's data from search\n                    let faq_data = {\n                        'product_id': __ffw_product_id,\n                        'new_item_id': new_item_id,\n                        'product_faqs': __ffw_products_faqs,\n                    };\n\n                    wp.ajax.post( 'ffw_insert_data_from_search', {\n                        nonce: nonce,\n                        faq_insert_search_data: faq_data,\n                    } ).then( response => {\n                        console.log('success.......');\n                        console.log(response.message);\n                        console.log(response.updated_data);\n                        $('#ffw_products').val(JSON.stringify(response.updated_data));\n                        $('.ffw-body').html(response.faq_body);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // FAQ sorting\n                        $.faq_woocommerce.ffw_sorting_data();\n\n                        // reset\n                        search_dom.val('').trigger('change');\n\n                    } ).fail( error => {\n                        console.log('erorr.......');\n                        console.log(error);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // reset\n                        search_dom.val('').trigger('change');\n                    } );\n                });\n\n                //ffw sortable\n                $(\".ffw-sortable\").sortable({\n                    axis: 'y',\n                    update : function (event, ui) {\n                        var data = $(this).sortable('serialize');\n                        console.log(data);\n\n                    }\n                });\n            }\n\n            //ffw select2 init\n            if( ffw_admin.current_page_action ) {\n                console.log(ffw_admin.current_page_action);\n            }\n            let search_dom = $('.ffw-role-select');\n            search_dom.select2({\n                placeholder: \"Select Roles\",\n                allowClear: true,\n            });\n\n            //modal js\n            $(document).on('click', '#ffw-product-form-header .ffw-add-new', this.openPopupForm);\n            $(document).on('click', '#ffw-popup-form-wrapper .ffw-modal-close, #ffw-popup-form-wrapper input[type=\"button\"]', this.closePopupForm);\n            $modal.bind('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e){\n                if($modal.hasClass('state-leave')) {\n                  $modal.removeClass('state-leave');\n                }\n            });\n\n            //onchange popup answer, update answer textarea value\n            // wp.editor.initialize('#ffw_popup_answer', {\n            //     setup: function (editor) {\n            //         editor.on('change', function () {\n            //             editor.save();\n            //         });\n            //     }\n            // });\n\n\n            //style inputs as color picker\n            $('.ffw_question_text_color').wpColorPicker();\n            $('.ffw_question_bg_color').wpColorPicker();\n            $('.ffw_question_bg_secondary_color').wpColorPicker();\n            $('.ffw_question_border_color').wpColorPicker();\n            $('.ffw_answer_text_color').wpColorPicker();\n            $('.ffw_answer_bg_color').wpColorPicker();\n            $('.ffw_answer_border_color').wpColorPicker();\n            $('.ffw-comments-date-time-color').wpColorPicker();\n            $('.ffw-comments-content-color').wpColorPicker();\n            $('.ffw-comments-author-name-color').wpColorPicker();\n            $('.ffw-comments-submit-button-text-color').wpColorPicker();\n            $('.ffw-comments-reply-button-text-color').wpColorPicker();\n            $('.ffw-comments-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-form-border-color').wpColorPicker();\n            $('.ffw-comments-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-reply-form-border-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-text-color').wpColorPicker();\n\n            //metabox option js\n            $(document).on('click', '#ffw_product_data .ffw-metabox h3', this.toggleOptionMetabox);\n            $(document).on('click', '#ffw_modal_submit', this.submitModalForm);\n            $(document).on('click', '#ffw-delete-all-faq', this.deleteAllFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-delete-btn', this.deleteSingleFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-edit-btn', this.openUpdatePopupForm);\n            $(document).on('click', '.ffw-layout-select', this.changePreviewImage);\n            $(document).on('change', '.ffw_question_font_size', this.changeQuestionRange);\n            $(document).on('change', '.ffw_answer_font_size', this.changeAnswerRange);\n            $(document).on('click', '.ffw-setting-wrapper .ffw-get-pro-wrapper', this.showProPopup);\n            $(document).on('click', '#ffw-popup-close', this.hideProPopup);\n            $(document).on('click', '.ffw-discount-notice .notice-dismiss', this.hideDiscountNotice);\n\n            $(document).on('click', '.ffw-template-preview-button', this.showTemplatePopup);\n            $(document).on('click', '.ffw-template-popup-close-button', this.hideTemplatePopup);\n            $(document).on('click', '.ffw-template-active-button', this.activateTemplate);\n\n            // Shortcodes page events.\n            $(document).on('click', '.ffw-shortcode-copy-icon-box', this.copyToClickShortcode);\n\n            //AI FAQs events.\n            $(document).on('click', '.ffw-ai-result-select-all-btn', this.ai_faqs_select_all);\n            $(document).on('click', '.ffw-ai-result-item-group input[type=checkbox]', this.ai_faqs_on_select);\n            $(document).on('click', '.ffw-ai-back-btn', this.ai_back_to);\n            $(document).on('submit', '.ffw-ai-faqs-form', this.ai_faqs_generator);\n            $(document).on('submit', '.ffw-ai-result-form', this.ai_faqs_insert);\n\n            // FAQ sorting.\n            this.ffw_sorting_data();\n\n        },\n\n        hideDiscountNotice: function(e) {\n            e.preventDefault();\n\n            console.log(\"Discounted...\");\n\n            let nonce = ffw_admin.nonce;\n\n            //data\n            let data = {\n                nonce: nonce,\n            };\n\n            wp.ajax.post( 'ffw_hide_discount_notice', {\n                data: data\n            } ).then( response => {\n                console.log(response);\n            } ).fail( error => {\n                console.log('erorr during discounted notice dismissal.......');\n            } );\n\n        },\n        openPopupForm: function(e) {\n            e.preventDefault();\n\n            $('#ffw_modal_submit').show();\n            $('#ffw_modal_update').hide();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus();\n            }, 500);\n\n            //reset question and answers\n            $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').val('');\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent('');\n            }\n        },\n        closePopupForm: function(e) {\n            e.preventDefault();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.removeClass('state-show');\n            $modal.removeClass('state-appear').addClass('state-leave');\n\t\t},\n        toggleOptionMetabox: function (e) {\n            e.preventDefault();\n\n            $( this ).parent( '.ffw-metabox' ).toggleClass( 'closed' ).toggleClass( 'open' );\n\n            // If the user clicks on some form input inside the h3, the box should not be toggled\n            if ( $( event.target ).filter( ':input, .ffw-sort, .ffw-handle-item' ).length ) {\n                return;\n            }\n\n            $( this ).next( '.ffw-metabox-content' ).stop().slideToggle();\n        },\n        submitModalForm: function (e) {\n            e.preventDefault();\n\n            //hide the popup\n            $('.ffw-modal-frame').removeClass('state-appear');\n            $('.modal-overlay ').removeClass('state-show');\n\n            //show loader\n            $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n            let ffw_answer_text = '';\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                ffw_answer_text =  tinyMCE.activeEditor.getContent();\n            }\n            let __ffw_product_id        = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs     = $('#ffw_products').val();\n                __ffw_products_faqs     = JSON.parse(__ffw_products_faqs);\n\n            let nonce = ffw_admin.nonce;\n            let ffw_question_val  = __ffw_question.val();\n\n            //insert faq's data\n            let faq_data = {\n                'question': ffw_question_val,\n                'answer': ffw_answer_text,\n                'product_id': __ffw_product_id,\n                'faq_list': __ffw_products_faqs,\n            };\n\n            wp.ajax.post( 'ffw_insert_new_faq', {\n                nonce: nonce,\n                faq_data: faq_data,\n            } ).then( response => {\n                $('#ffw_products').val(JSON.stringify(response.faq_data));\n                $('.ffw-body').html(response.faq);\n                $('.ffw-popup-form-add-question').val('');\n                $('.ffw-popup-form-add-answer').val('');\n\n                //hide loader\n                $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n            } );\n\n        },\n        deleteAllFaq: function (e) {\n            e.preventDefault();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n\n            let total_product = '';\n            if( undefined === __ffw_products_faqs || 0 === __ffw_products_faqs.length ) {\n                console.log(__ffw_products_faqs);\n                total_product = 0;\n            }\n\n            //insert faq's data\n            let faq_delete_data = {\n                'product_id': __ffw_product_id\n            };\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Delete all the faqs?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    wp.ajax.post( 'ffw_delete_all_faqs', {\n                        nonce: nonce,\n                        faq_delete_data: faq_delete_data,\n                    }).then( response => {\n\n                        if(response.success) {\n                            //item hide\n                            $('.ffw-metabox-item').hide();\n\n                            //make current faqs data empty\n                            $('#ffw_products').val(JSON.stringify([]));\n\n                            const Toast = Swal.mixin({\n                                toast: true,\n                                position: 'bottom-end',\n                                showConfirmButton: false,\n                                timer: 1500,\n                                timerProgressBar: true,\n                                didOpen: (toast) => {\n                                    toast.addEventListener('mouseenter', Swal.stopTimer);\n                                    toast.addEventListener('mouseleave', Swal.resumeTimer);\n                                }\n                            });\n\n                            Toast.fire({\n                                icon: 'success',\n                                title: 'Delete successfull.'\n                            });\n                        }\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        deleteSingleFaq: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n            let current_faq = $(this).parents('.ffw-metabox-item');\n            let current_faq_id = $(this).attr('rel');\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Are you sure to Delete?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    const index = __ffw_products_faqs.indexOf(current_faq_id);\n                    if (index > -1) {\n                        __ffw_products_faqs.splice(index, 1);\n                    }\n\n                    //update faq's data\n                    let faq_updated_data = {\n                        'product_id': __ffw_product_id,\n                        'updated_faq_list': __ffw_products_faqs\n                    };\n\n                    //hide current faq\n                    current_faq.hide();\n\n                    wp.ajax.post( 'ffw_delete_single_faq', {\n                        nonce: nonce,\n                        faq_updated_data: faq_updated_data,\n                    }).then( response => {\n                        console.log('success.......');\n                        console.log(response);\n                        console.log(JSON.stringify(response.update_faq_list));\n                        $('#ffw_products').val(JSON.stringify(response.update_faq_list));\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        openUpdatePopupForm: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            $('#ffw_modal_submit').hide();\n            $('#ffw_modal_update').show();\n\n            //open modal\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            let __ffw_id = $(this).attr('rel');\n                $('#ffw-current-ques-id').val(__ffw_id);\n            let __ffw_old_question = $(this).parent('h3').find('strong').html();\n            let __ffw_old_answer = $(this).parents('.ffw-metabox-item').find('.ffw-metabox-content .data div').html();\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n                __ffw_question.val(__ffw_old_question);\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus().putCursorAtEnd();\n            }, 500);\n\n            //set value for answer\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent(__ffw_old_answer);\n            }\n        },\n        changePreviewImage: function(e) {\n            let current_image = $(this).val();\n\n            $('.ffw-setting-layout img').each(function(item) {\n               let image_layout = $(this).data('layout');\n               if( image_layout === parseInt(current_image) ) {\n                   $(this).removeClass('ffw-hide').addClass('ffw-visible');\n               }else {\n                   $(this).removeClass('ffw-visible').addClass('ffw-hide');\n               }\n            });\n        },\n        changeQuestionRange: function(e) {\n            let question_range_val = $(this).val();\n            $('.ffw_question_font_size_label').text(question_range_val + \"px\");\n        },\n        changeAnswerRange: function(e) {\n            let answer_range_val = $(this).val();\n            $('.ffw_answer_font_size_label').text(answer_range_val + \"px\");\n        },\n        ffw_sorting_data: function(e) {\n\n            // Allow FAQ sorting\n            $( '.ffw-sortable' ).sortable({\n                cursor:               'move',\n                axis:                 'y',\n                handle:               '.ffw-sort-icon',\n                scrollSensitivity:    40,\n                forcePlaceholderSize: true,\n                helper:               'clone',\n                opacity:              0.65,\n                stop:                 function() {\n                    var selectedData = [];\n                    $('.ffw-sortable .ffw-metabox-item').each(function() {\n                        selectedData.push($(this).attr(\"id\"));\n                    });\n                    $.faq_woocommerce.ffw_sortable(selectedData);\n                }\n            });\n        },\n        ffw_sortable: function(data) {\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let nonce               = ffw_admin.nonce;\n\n            //sort faq's data\n            let faq_data = {\n                'product_id': __ffw_product_id,\n                'faq_sorted_list': data,\n            };\n\n            wp.ajax.post( 'ffw_sort_faq_data', {\n                nonce: nonce,\n                faq_sorted_data: faq_data,\n            } ).then( response => {\n                console.log('success.......');\n                console.log(response.message);\n                $('#ffw_products').val(JSON.stringify(data));\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n            } );\n        },\n        showProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').removeClass('ffw-hide');\n\t\t},\n        hideProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').addClass('ffw-hide');\n\t\t},\n        showTemplatePopup: function(e){\n            e.preventDefault();\n\n            // get & show image url in the popup\n            var img_url = $(this).parents('.ffw-item-wrapper').find('.ffw-layout-img img').attr('src');\n            $('.ffw-template-popup-inner img').attr('src', img_url);\n\n            // control body overflow not to scroll\n            $('body').addClass('ffw-overflow-hidden');\n\n            // activate the popup\n            $(\".ffw-active\").removeClass(\"ffw-active\");\n            $(\".ffw-template-popup-wrapper\").addClass(\"ffw-active\");\n        },\n        hideTemplatePopup: function(e){\n            e.preventDefault();\n\n            // reset body overflow\n            $('body').removeClass('ffw-overflow-hidden');\n\n            $(\".ffw-template-popup-wrapper\").removeClass(\"ffw-active\");\n        },\n        activateTemplate: function(e){\n            e.preventDefault();\n\n            $('.ffw-item-wrapper').removeClass('ffw-template-active');\n            $(this).parents('.ffw-item-wrapper').addClass('ffw-template-active');\n\n            var template_id = $(this).data('templte_id');\n            let nonce       = ffw_admin.nonce;\n\n            //set to hidden layout field\n            $('input[name=\"ffw_general_settings[ffw_layout]\"]').val(template_id);\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    data: {\n                        action: 'ffw_activate_template',\n                        nonce: nonce,\n                        template_id: template_id,\n                    }\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log('success.......');\n                }\n            );\n        },\n        copyToClickShortcode: function(e) {\n            e.preventDefault();\n\n            var $tooltip = $(this).find('.ffw-tooltip');\n            var shortcode = $(this).closest('.ffw-shortcode-box').find('.ffw-shortcode').text();\n\n            if (navigator.clipboard && window.isSecureContext) {\n                navigator.clipboard.writeText(shortcode).then(() => {\n                    $tooltip.text('Copied: ' + shortcode);\n                    setTimeout(() => $tooltip.text('Click to copy'), 2000);\n                });\n            } else {\n                var $temp = $(\"<textarea>\");\n                $(\"body\").append($temp);\n                $temp.val(shortcode).select();\n                document.execCommand(\"copy\");\n                $temp.remove();\n                \n                $tooltip.text('Copied');\n                setTimeout(() => $tooltip.text('Click to copy'), 2000);\n            }\n        },\n        ai_faqs_select_all: function(e) {\n            console.log('ai_faqs_select_all');\n            let ai_result_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]');\n\n            console.log(ai_result_checkbox);\n            \n            if(e.target.checked) {\n                ai_result_checkbox.attr('checked', true);\n            }else{\n                ai_result_checkbox.attr('checked', false);\n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_faqs_selected_item_count: function(e) {\n            let ai_selected_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]:checked');\n            let item_count_text = $('.ffw-ai-selected-count');\n\n            console.log(ai_selected_checkbox);\n\n            if(ai_selected_checkbox.length > 0) {\n                let items_count = ai_selected_checkbox.length + ' Items Selected';\n                item_count_text.text(items_count);\n            }else {\n                console.log(ffw_admin.strings.ai_item_selected);\n                item_count_text.text(ffw_admin.strings.ai_item_selected);\n            }\n        },\n        ai_faqs_on_select: function(e) {\n            if(e.target.checked) {\n                \n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_back_to: function(e) {\n            e.preventDefault();\n\n            $('.ffw-ai-result-content').hide();\n\n            let submitBtn = document.querySelector('.ffw-ai-faqs-form button[type=submit] span');\n            submitBtn.innerText = 'Generate FAQs';\n\n            $('.ffw-ai-form-content').fadeIn();\n        },\n        ai_faqs_generator: function(e) {\n            e.preventDefault();\n\n            const formData = new FormData(e.target);\n            let nonce      = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span');\n            submitBtn.innerText = 'Generating...';\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_generate_ai_faqs\");\n            formData.append(\"nonce\", nonce);\n\n            console.log('ai faqs generation..');\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log(response);\n\n                    if(response.data.html.length > 0) {\n                        $('.ffw-ai-result-fields').html(response.data.html);\n                        $('.ffw-ai-form-content').fadeOut();\n\n                        $('.ffw-ai-result-content-header h3').text('10 results for \"' + response.data.product_title + '\"');\n\n                        $('.ffw-ai-result-content').addClass('ffw-ai-result-content-active');\n                    }\n\n                    if(response.data.product_id) {\n                        $('.ffw-ai-result-form').attr('product_id', response.data.product_id);\n                    }\n                }\n            );\n        },\n        ai_faqs_insert: function(e) {\n            e.preventDefault();\n\n            const formData  = new FormData(e.target);\n            let nonce       = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span:last-child');\n            submitBtn.innerText = 'Inserting...';\n\n            let product_id = $('.ffw-ai-result-form').attr('product_id');\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_insert_ai_faqs\");\n            formData.append(\"ffw_insert_ai_product_id\", product_id);\n            formData.append(\"nonce\", nonce);\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    if(response.success) {\n                        window.location.href = ffw_admin.faw_list_page_url;\n                    }\n                }\n            );\n        }\n\n\t};\n\n\n\t$.faq_woocommerce.init();\n});\n"]}