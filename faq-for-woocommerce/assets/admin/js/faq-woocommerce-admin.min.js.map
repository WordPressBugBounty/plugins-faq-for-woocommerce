{"version":3,"sources":["faq-woocommerce-admin.js"],"names":["jQuery","document","ready","$","fn","putCursorAtEnd","this","setTimeout","$el","focus","is","el","length","len","val","setSelectionRange","scrollTop","faq_woocommerce","placeholder","ajax_url","ffw_admin","new_item_id","$modal","select2","search_dom","minimumResultsForSearch","__ffw_product_id","__ffw_products_faqs","allowClear","e","nonce","JSON","parse","log","addClass","ajax","post","faq_data","then","response","error","console","stringify","removeClass","data","trigger","fail","sortable","axis","update","event","hasClass","on","wpColorPicker","openPopupForm","closePopupForm","bind","ffw_sorting_data","preventDefault","toggleOptionMetabox","submitModalForm","deleteAllFaq","deleteSingleFaq","openUpdatePopupForm","changeQuestionRange","changeAnswerRange","hideProPopup","hideDiscountNotice","showTemplatePopup","hideTemplatePopup","activateTemplate","ai_faqs_select_all","ai_faqs_on_select","ai_back_to","$overlay","ai_faqs_generator","ai_faqs_insert","tinymce","wp","parent","hide","ffw_answer_text","get","setContent","ffw_question_val","toggleClass","next","stop","slideToggle","__ffw_question","tinyMCE","activeEditor","total_product","showCancelButton","html","isConfirm","faq_delete_data","showConfirmButton","toast","undefined","title","current_faq","Toast","mixin","position","timerProgressBar","didOpen","addEventListener","Swal","stopTimer","resumeTimer","__ffw_id","parents","current_faq_id","attr","fire","__ffw_old_answer","icon","index","indexOf","splice","faq_updated_data","question_range_val","answer_range_val","opacity","ffw_sortable","selectedData","find","faq_sorted_data","each","item","image_layout","parseInt","text","img_url","cursor","scrollSensitivity","helper","push","dataType","template_id","ai_result_checkbox","ai_selected_checkbox","items_count","innerText","contentType","method","action","formData","submitBtn","target","append","processData","location","faw_list_page_url","item_count_text","strings","querySelector","fadeIn","FormData","url","done","fadeOut","product_title","product_id","window","href","init"],"mappings":"aAIAA,OAAAC,UAAAC,MAAA,SAAAC,G,OAGCC,GAAAC,eAAA,W,OAESC,KAAID,KAAAA,W,IAoBEE,EAfAC,EAAQL,EAAAG,M,EAARE,KAKIC,EAAJD,GAAAE,W,EAGJF,QAGIG,EAAAA,mBAIAJ,EAAsBK,EAAXC,EAAAL,MAAAM,O,WAIRP,W,oBAEHQ,EAAAF,I,MAQCG,IAALF,EAAiBN,O,KAQrBQ,UAAA,U,EAFNC,gBAAD,C,SAWeC,G,KATV,W,KAEMC,SAAAC,UAAgBA,Q,IAsCJC,EAnCZC,EAAUnB,EAAA,4C,mCAeRoB,QAA4BA,C,YAC1BL,qB,2BAMAK,QAAAA,C,YACIC,sB,sBAIAC,QAAuBF,C,YAH3BL,gBASI,YAAIQ,UAAgBN,mBAAhBM,SAAgDZ,UAApDM,uBAEIC,EAAAA,EAAwB,gBAXhCG,QAAWD,C,YAYHI,oB,YAVJC,E,wBAWAD,EAAAA,I,EAPJH,GAAU,iBAAI,SAAkBK,G,MAexBH,EAFW,wBAAAZ,M,EAGXgB,UAAgBH,M,EAHpBN,EAAAf,MAAAQ,M,EAMca,EAAA,iBAAAb,M,EACHgB,KADkCC,MAAAC,G,2CAIjCC,SAARC,e,QAJDC,KAAKC,8BAAM,C,MAiBCtB,E,uBAVTuB,C,WACAX,E,YAZFL,E,aAeEM,K,KASUW,SAAAC,G,QACAC,IAAAA,kB,QAhBZC,IAAAA,EAAYF,S,QAmBVE,IAAAA,EAAAF,c,mBAjBAzB,IAADiB,KAADW,UAA4BA,EAAUH,e,eAoB3BzB,KAAAA,EAAgByB,U,2CAhBzBI,YAAyCA,e,kBAqBvB1B,mB,EAIR2B,IAAAA,IAAZ9B,QAAA+B,Y,KAJRC,SAAAN,G,QAUJC,IAAAA,gB,QArBYA,IAAAA,G,2CAuBIrB,YAAZuB,e,EAEcnB,IAAAA,IAACV,QAAD+B,c,mBAdZE,SAAiBA,C,KAqBvBC,I,OACAC,SAAAC,EAAwBA,G,MACZN,EAAAA,MAAAG,SAAAA,a,QACEI,IAAAA,OASd/B,UAAAA,qB,QACAqB,IAAAR,UAAAb,qBAEAjB,EAAA,oBAGAqB,QAAAD,C,YAvBIL,e,YAwBFU,I,YAIA3B,GAAAmD,QAAA,wCAA0BC,KAA5BC,e,YACErD,GAAAmD,QAAA,yFAAwBC,KAA1BE,gB,EACEjC,KAAAkC,+DAAA,SAAF3B,GACEP,EAAAA,SAAA6B,gB,EACA7B,YAAAqB,iB,8BAgBA1C,gB,4BACAA,gB,sCACAA,gB,gCACAA,gB,4BACAA,gB,0BACAA,gB,8BACAA,gB,mCACAA,gB,iCACAA,gB,qCAEAA,gB,4CACAA,gB,2CACAA,gB,0CAxBAoD,gB,qCA2BApD,gB,oCACAA,gB,0CACAA,gB,kDACAA,gB,qDACAA,gB,2CAzBAoD,gB,uDA4BGI,gB,YAKHC,GAAFN,QAAA,oCAAA9C,KAAAqD,qB,YAEQ1B,GAAImB,QAAA,oBAAZ9C,KAAAsD,iB,YAEI9B,GAAQV,QAAS,sBAErBd,KAAAuD,c,YAhCE5D,GAAUmD,QAAG,kDAAS9C,KAAmDwD,iB,YAiCnE7D,GAAGmD,QAAA,gDAAA9C,KAAAyD,qB,YACF9D,GAAE6B,QAAAA,qBAAAA,KAAAA,oB,YADX7B,GAAAmD,SAAA,0BAAA9C,KAAA0D,qB,YAIQ5B,GAAMgB,SAAA,wBAAA9C,KAA4B2D,mB,YAChCrB,GAAAA,QAAAA,4CAAAA,KAAAA,c,YACA3C,GAAAsC,QAAAA,mBAAYjC,KAAA4D,c,YAClBzB,GAAYF,QAAAA,uCAAZjC,KAAA6D,oB,YAEA1B,GAAYW,QAAA,+BAAA9C,KAAA8D,mB,YALhBnE,GAAAmD,QAAA,mCAAA9C,KAAA+D,mB,YA9LSpE,GAAAmD,QAAA,8BAAA9C,KAAAgE,kB,YA0MPrE,GAAAmD,QAAD,gCAAD9C,KAAAiE,oB,YACEtE,GAAAmD,QAAD,iDAAD9C,KAAAkE,mB,YAEIlD,GAAW8B,QAAA,mBAAA9C,KAAfmE,Y,YACIC,GAAatB,SAAA,oBAAA9C,KAAjBqE,mB,YACQ1E,GAAUmD,SAAA,sBAAlB9C,KAAAsE,gB,KAIArE,oB,mBAKE,SAAAsB,G,2BAEEgD,IAAY5C,iBA1NPH,EAAAV,UAAAA,M,GAAA0D,KAAA3C,KAAAC,2BAAA,C,KAgOK,C,MACVsC,KAjOKpC,KAsOPoB,SAAFnB,G,QAEUwC,IAAQ9C,KAtCjBa,KAAGA,SAAMN,G,QAyCFU,IAAFjB,sD,cAIU,SAAAJ,G,0CAGd6B,O,uBAvCAsB,OA2CA1D,EAAAnB,EAAA,oBAxCUA,EAAA,kBA2CVuE,SAAAxC,c,EAzCFZ,YAAOqB,eAAYT,SAAeA,gB,WA4C9B+C,W,0DAxCExE,SAyCDT,K,0DArCHc,IAAwDA,IAwCtDY,OAAAA,6BAAAA,SAA2ByB,gB,QAtC3B0B,IAAQK,oBAAIC,WAAoBA,K,eAwChCxD,SAAAA,G,mBAGAyD,EAAAA,EAAAA,oBApCQjF,EAAA,kBACZuE,YAAS/B,c,EAsCLN,YAAQM,gBAAGT,SAAAA,gB,oBAED+C,SAAAA,G,2BAFdF,OAAAA,gBAAAM,YAAAA,UAAAA,YAAAA,QASIhD,EAAAA,MAAUA,QAAAA,OAAAA,uCAAAA,Q,QAIRiD,KAAAA,wBAAAC,OAAAC,e,gBApCK,SAAE3D,G,yCA6CHc,YAASA,gB,qBACfF,YAAYE,c,2CAIV1B,SAAFiB,e,IAnSKuD,EAAAtF,EAAA,wDAuSb0D,EAAc,GAvCVnC,GAwCEgC,OAAAA,6BAAFP,SAAAA,iB,EA1CI8B,QAAmBS,aAAQC,cAEXxF,EAAA,wBAAYW,OA2C5Ba,EAAyBxB,EAAA,iBAAAW,M,EAzCNiB,KAAOA,MAAKC,GA2C/BF,EAAQV,UAAAA,MAERwE,EAAJH,EAAAA,M,GAWAX,KAAA3C,KAAAC,qBAAA,C,MA1CIN,E,SAiCYH,C,SACZiE,E,OAGJX,E,WA1CIvD,E,SACAC,KA8CJW,KAEWA,SAAAC,G,mBACDzB,IAFAA,KAAAiB,UAAAW,EAAAH,W,eAGNsD,KAAkBC,EAAAvD,K,kCACdzB,IAAoBA,I,gCAEpBiF,IAAuBjF,I,2CAInBkF,YAAiBA,e,kBAIb/E,qBA3Cf6B,KAAGA,SAAMN,G,QA+CQC,IAAAR,gB,QAEFQ,IAAWR,G,kBAGPgE,sB,aAIIC,SAAAA,G,uBA5CxBxE,EAqCgBvB,EAAA,wBAAAW,MApChBa,EAgD2BxB,EAAA,iBAAAW,M,EAAAiB,KAAAA,MAAAC,GA9C3BF,EAgDyBV,UAAEA,MA7VlB4E,QAmUDG,IA8BSxE,GAANmB,IAAenB,EAAAA,Q,QACdc,IAAYR,GAlWf,C,WA0Wb6B,I,KAIQpC,KAAAA,C,MAlDA0E,uB,KAmDAzE,W,kBAjDAkE,IAgDAnE,KAEAC,SAAAA,GAEA0E,EAAAA,a,QA/COlE,KAAKC,sBAAM,C,MAmDZN,E,gBACCkE,I,KACD1D,SAFAC,G,EAIOwD,U,uBAIKpE,O,mBAEVA,IAAAA,KAAAb,UAAA4B,KAjDU4D,KAAKC,MAAO,C,kBAqDNC,a,mBACF9E,E,6BAIlB+E,E,QApDYC,SAASR,G,mBAqDrBS,aAAAC,KAAAC,W,mBAEcF,aAAyBC,KAAAE,gB,KAIvBR,C,qDAOZxD,SAAAN,G,QAXJC,IAAAA,8B,QAcHA,IAAAA,Q,gBASH,SAAAZ,G,2CAKF6C,EAAkBvE,EAAA,wBAAlBW,MACMa,EAAaxB,EAAA,iBAAe+B,M,EAzDXH,KAAGA,MAAKC,GA2D3B+E,EAAW5G,UAAEiB,MAzDjBiF,EAAelG,EAAAG,MAAK0G,QAAMA,qBA0DpBC,EAAD9G,EAAAG,MAAD4G,KAA8BH,O,KAtDlCH,KAAKO,C,MAwDDC,0B,KAtDAC,W,kBAuDA5B,IAzDMnD,KAIPA,SAAKyD,GAEJA,EAAIA,eAwDFuB,G,EADKA,EAAW3F,QAAA4F,K,EAItB5F,OAAA6F,EAAAF,G,EAGCG,C,WA1bQ/F,E,iBA4bOC,G,EAlDR0E,O,QAwDO1D,KAAAA,wBAAY,C,MAClBb,E,iBACMa,I,KACXL,SAAAC,G,QANJE,IAAAA,kB,QA/bSA,IAAAA,G,QAwcMA,IAAAA,KAAAC,UAAEA,EAAAH,kB,mBACbmF,IAAAA,KAAAA,UAAJhF,EAAAH,oB,KAzcSO,SAAAN,G,QA4cMC,IAAAA,8B,QACXkF,IAAAA,S,oBAM0B,SAAA9F,G,8DAMpBmD,O,uBACN4C,O,IAGMtG,EAAAnB,EAAA,oBAVV4G,GAWwB5G,EAAA,kBADhBuE,SAAAxC,c,EAGEjB,YAAAA,eAAgB4G,SAAaC,gBAbvC3H,EAAAG,MAAA4G,KAAAA,QAiBJW,G,0BApea/G,IAAAA,GAoeCX,EAAAG,MAAAyE,OAAAA,MAAegD,KAAAA,UAAAjC,QACrBpE,EAAwBvB,EAAAG,MAAA0G,QAAAA,qBAAAe,KAA5BA,kCAAAjC,OAtDkB3F,EAAA,wDAuDTsF,IAA2B3D,G,WAIhCvB,W,0DACAE,QAAmBmC,kBAFvB,KAOIoF,OAAAA,6BAAe7E,SAAEd,gB,QACXwC,IAAAtC,oBAAAA,WAAY4C,I,mBAGlB,SAAmBrE,G,IAEnBgC,EAAW3C,EAAAG,MAAIQ,M,6BAEf2B,KAAAwF,SAAAC,GAVJC,EAAA7H,MAAAsC,KAAAA,YA9eSwF,SAAAA,G,QA2fCzF,YAAAA,YAAAT,SAAYA,e,QAGpBS,YAADA,eAAsBA,SAAvBT,e,oBAKC,SAAsBA,G,IAngBdwF,EAAAvH,EAAAG,MAAAQ,M,mCAqgBbsD,KAAmBiE,EAAW,O,kBAzDb,SAAExG,G,IA6DXyG,EAAkBtB,EAAAA,MAAQlG,M,iCAC5BuH,KAAFA,EAEA,O,iBACA,SAAmBxG,G,mBAIjBkB,SAAAA,C,OAjhBOwF,O,KAmhBblE,I,OACMX,iB,kBA7DE8E,G,sBAgEM7F,E,OAER8F,Q,QAzhBOb,I,KA2hBbtD,W,MACIwD,G,qCAEEG,KAAiCA,W,EACnBH,KAAA3H,EAAAuI,MAAqBxG,KAArC,S,kBAGkBd,aAElByG,O,aAKgB,SADZjF,G,IAEOlB,EAFPvB,EAAA,wBAAAW,MAGI6H,EAAUvH,UAHdA,M,GADJ0D,KAAA3C,KAAAC,oBAAA,C,MAviBSN,E,gBA4iBK,C,WAGF8G,E,gBAHEhG,KALdN,KAmBQL,SAAIM,G,QACRsG,IAAAA,kB,QAEI5G,IAAI4G,EAAAA,S,mBAzEN/H,IAAiBA,KAAIiB,UAAKW,MA4E5BmG,KAAAA,SAAAA,G,QACCpG,IAAAR,gB,QACD4G,IAAAA,M,aAGF5H,SAAAA,G,0CAGE6H,YAAyBnG,a,aAGjBmG,SAAAA,G,0CAGJC,SAAcD,a,kBAEhB,SAAAjH,G,mBAhlBGyG,EAAAnI,EAAAG,MAAA0G,QAAAA,qBAAAe,KAAAA,uBAAAb,KAAAA,O,mCAqlBb1C,KAAmB0C,MAAAoB,G,UAKbrH,SAAAA,uB,iBAGAyC,YAAFf,c,iCAEET,SAAFA,e,kBAGA,SAAAL,G,6BAKE6B,YAAFf,uB,iCAGIb,YAAJa,e,iBAGUqG,SAAVnH,G,0CAIQc,YAAiBb,uB,QAEjBG,QAAI+E,qBAAA9E,SAEZA,uB,IApFA0G,EAAezI,EAAAG,MAAKsC,KAAMA,cAuF1Bd,EACIV,UAAAA,M,oDAGIuH,IAHJ7H,G,OAKImI,C,OAKJC,O,IACgB3G,UAAAA,Q,SAzFZoG,O,KA2FW/F,C,OACLuG,wB,MACArH,E,YAEA8G,KAXAQ,KAgBH7G,SACGA,G,QACLE,IAAAR,qB,mBAKT,SAAAJ,G,QAEMuH,IAAQnH,sB,IACVH,EAAJ3B,EAAA,kD,QAGAkJ,IAAUL,GA7FVnH,EAAAyH,OAAKA,Q,EAkGIC,KAAiBrC,WAAA,G,EAEjBqC,KAAgBzH,WAEzB,G,kBAIIb,+B,4BAAA,SAAAY,G,IAGI8G,EAHJxI,EAAA,0DAIIqJ,EAJJrJ,EAAA,0B,QAMQsC,IAAE2G,GAKH7G,EAAAA,EAAAA,QACOwG,EAACU,EAAgBrI,OAAUsI,kB,EACpCC,KAAAtB,K,QAGZ5F,IAAAR,UAAAb,QAAAwI,kB,EAzrBRD,KAAAtB,UAAAjH,QAAAwI,oB,kBAqlBwB,SAAE/H,GACfA,EAAAyH,OAAKA,Q,kBAIHrI,+B,WAEI,SAAEY,G,+CAGNmD,OAEW/E,SAAGA,cAAS4J,8CACzBR,UAAA,gB,0BAEES,U,kBAEW,SAAEjI,G,uBAGfuH,EAAc,IAAGW,SAAIA,EAAJT,QACjBxH,EAASV,UAAQA,MAEJS,EAAAyH,OAAOA,cAAOO,4BAC3BR,UAAA,gB,EAGAD,OAASG,SAAO,wB,EAChBH,OAASG,QAAOzH,G,QAEhBW,IAAQR,wB,OAKNE,C,OAEM+G,O,IACAc,UAAK5I,Q,SACLuH,O,aACAa,E,aACAP,E,KACArG,IANJqH,KASHA,SACG1H,G,QACIE,IAAQR,GAEcrB,EAAtB2B,EAAGA,KAASK,KAAKkD,S,2BACXA,KAAyBA,EAAKvD,KAASK,M,0BACvCsH,U,sCAEA7B,KAAoCA,mBAAK9F,EAAqBA,KAASK,cAAKuH,K,4BAE5EjI,SAA0BA,iCAGhCK,EAAGA,KAASK,Y,yBACNsE,KAAuBA,aAAK3E,EAAcA,KAASK,e,eAKvD,SAAEf,G,uBAGZuH,EAAc,IAAIW,SAAIA,EAAJT,QAClBxH,EAASV,UAASA,MAKlBgJ,GAHavI,EAAAyH,OAAOA,cAAOO,uCAC3BR,UAAA,eAEclJ,EAAA,uBAAK+G,KAAuBA,e,EAG1CkC,OAASG,SAAO,sB,EAChBH,OAASG,2BAAOa,G,EAChBhB,OAASG,QAAOzH,G,OAKdK,C,OAEM+G,O,IACAc,UAAK5I,Q,SACLuH,O,aACAa,E,aACAP,E,KACArG,IANJqH,KASHA,SACG1H,GACIA,EAAGA,U,OACC8H,SAAOZ,KAASa,UAAOlJ,uB,EAS7CH,gBAADsJ","file":"faq-woocommerce-admin.min.js","sourcesContent":["/**\n * Woocommerce FAQ Admin JS\n *\n * Copyright (c) 2019 wpfeel\n * Licensed under the GPLv2+ license.\n */\njQuery(document).ready(function ($) {\n\t'use strict';\n\n    jQuery.fn.putCursorAtEnd = function() {\n\n        return this.each(function() {\n\n            // Cache references\n            var $el = $(this),\n                el = this;\n\n            // Only focus if input isn't already\n            if (!$el.is(\":focus\")) {\n                $el.focus();\n            }\n\n            // If this function exists... (IE 9+)\n            if (el.setSelectionRange) {\n\n                // Double the length because Opera is inconsistent about whether a carriage return is one character or two.\n                var len = $el.val().length * 2;\n\n                // Timeout seems to be required for Blink\n                setTimeout(function() {\n                    el.setSelectionRange(len, len);\n                }, 1);\n\n            } else {\n\n                // As a fallback, replace the contents with itself\n                // Doesn't work in Chrome, but Chrome supports setSelectionRange\n                $el.val($el.val());\n\n            }\n\n            // Scroll to the bottom, in case we're in a tall textarea\n            // (Necessary for Firefox and Chrome)\n            this.scrollTop = 999999;\n\n        });\n\n    };\n\n\t$.faq_woocommerce = {\n        ajax_url: '',\n\t\tinit: function () {\n            //assign ajax url\n            this.ajax_url = ffw_admin.ajaxurl;\n\n            // modal form\n            var $modal = $('#ffw-popup-form-wrapper .ffw-modal-frame');\n\n            // display in pages.\n            $('.ffw-display_in_pages-select2').select2({\n                placeholder: \"Select Woo Pages\",\n                // allowClear: true\n            });\n            \n            // faq categories.\n            $('.ffw-category-select2').select2({\n                placeholder: \"Select categories\",\n                // allowClear: true\n            });\n            \n            // faq tags.\n            $('.ffw-tag-select2').select2({\n                placeholder: \"Select tags\",\n                // allowClear: true\n            });\n\n            if( \"product\" === ffw_admin.current_post_type && \"edit\" === ffw_admin.current_page_action ) {\n\n                //ffw select2 init\n                let search_dom = $('.ffw_search');\n                search_dom.select2({\n                    placeholder: \"Select a faq post\",\n                    allowClear: true,\n                    minimumResultsForSearch: Infinity\n                });\n\n                search_dom.on(\"select2:select\", function(e) {\n                    // console.log(\"hello puishak\");\n\n                    let __ffw_product_id    = $('#ffw_product_page_id').val();\n                    let nonce               = ffw_admin.nonce;\n                    let new_item_id         = $(this).val();\n                    let __ffw_products_faqs  = $('#ffw_products').val();\n                    __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n\n                    //show loader\n                    $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n                    //insert faq's data from search\n                    let faq_data = {\n                        'product_id': __ffw_product_id,\n                        'new_item_id': new_item_id,\n                        'product_faqs': __ffw_products_faqs,\n                    };\n\n                    wp.ajax.post( 'ffw_insert_data_from_search', {\n                        nonce: nonce,\n                        faq_insert_search_data: faq_data,\n                    } ).then( response => {\n                        console.log('success.......');\n                        console.log(response.message);\n                        console.log(response.updated_data);\n                        $('#ffw_products').val(JSON.stringify(response.updated_data));\n                        $('.ffw-body').html(response.faq_body);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // FAQ sorting\n                        $.faq_woocommerce.ffw_sorting_data();\n\n                        // reset\n                        search_dom.val('').trigger('change');\n\n                    } ).fail( error => {\n                        console.log('erorr.......');\n                        console.log(error);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // reset\n                        search_dom.val('').trigger('change');\n                    } );\n                });\n\n                //ffw sortable\n                $(\".ffw-sortable\").sortable({\n                    axis: 'y',\n                    update : function (event, ui) {\n                        var data = $(this).sortable('serialize');\n                        console.log(data);\n\n                    }\n                });\n            }\n\n            //ffw select2 init\n            if( ffw_admin.current_page_action ) {\n                console.log(ffw_admin.current_page_action);\n            }\n            let search_dom = $('.ffw-role-select');\n            search_dom.select2({\n                placeholder: \"Select Roles\",\n                allowClear: true,\n            });\n\n            //modal js\n            $(document).on('click', '#ffw-product-form-header .ffw-add-new', this.openPopupForm);\n            $(document).on('click', '#ffw-popup-form-wrapper .ffw-modal-close, #ffw-popup-form-wrapper input[type=\"button\"]', this.closePopupForm);\n            $modal.bind('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e){\n                if($modal.hasClass('state-leave')) {\n                  $modal.removeClass('state-leave');\n                }\n            });\n\n            //onchange popup answer, update answer textarea value\n            // wp.editor.initialize('#ffw_popup_answer', {\n            //     setup: function (editor) {\n            //         editor.on('change', function () {\n            //             editor.save();\n            //         });\n            //     }\n            // });\n\n\n            //style inputs as color picker\n            $('.ffw_question_text_color').wpColorPicker();\n            $('.ffw_question_bg_color').wpColorPicker();\n            $('.ffw_question_bg_secondary_color').wpColorPicker();\n            $('.ffw_question_border_color').wpColorPicker();\n            $('.ffw_answer_text_color').wpColorPicker();\n            $('.ffw_answer_bg_color').wpColorPicker();\n            $('.ffw_answer_border_color').wpColorPicker();\n            $('.ffw-comments-date-time-color').wpColorPicker();\n            $('.ffw-comments-content-color').wpColorPicker();\n            $('.ffw-comments-author-name-color').wpColorPicker();\n            $('.ffw-comments-submit-button-text-color').wpColorPicker();\n            $('.ffw-comments-reply-button-text-color').wpColorPicker();\n            $('.ffw-comments-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-form-border-color').wpColorPicker();\n            $('.ffw-comments-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-reply-form-border-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-text-color').wpColorPicker();\n\n            //metabox option js\n            $(document).on('click', '#ffw_product_data .ffw-metabox h3', this.toggleOptionMetabox);\n            $(document).on('click', '#ffw_modal_submit', this.submitModalForm);\n            $(document).on('click', '#ffw-delete-all-faq', this.deleteAllFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-delete-btn', this.deleteSingleFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-edit-btn', this.openUpdatePopupForm);\n            $(document).on('click', '.ffw-layout-select', this.changePreviewImage);\n            $(document).on('change', '.ffw_question_font_size', this.changeQuestionRange);\n            $(document).on('change', '.ffw_answer_font_size', this.changeAnswerRange);\n            $(document).on('click', '.ffw-setting-wrapper .ffw-get-pro-wrapper', this.showProPopup);\n            $(document).on('click', '#ffw-popup-close', this.hideProPopup);\n            $(document).on('click', '.ffw-discount-notice .notice-dismiss', this.hideDiscountNotice);\n\n            $(document).on('click', '.ffw-template-preview-button', this.showTemplatePopup);\n            $(document).on('click', '.ffw-template-popup-close-button', this.hideTemplatePopup);\n            $(document).on('click', '.ffw-template-active-button', this.activateTemplate);\n\n            //AI FAQs events.\n            $(document).on('click', '.ffw-ai-result-select-all-btn', this.ai_faqs_select_all);\n            $(document).on('click', '.ffw-ai-result-item-group input[type=checkbox]', this.ai_faqs_on_select);\n            $(document).on('click', '.ffw-ai-back-btn', this.ai_back_to);\n            $(document).on('submit', '.ffw-ai-faqs-form', this.ai_faqs_generator);\n            $(document).on('submit', '.ffw-ai-result-form', this.ai_faqs_insert);\n\n            // FAQ sorting.\n            this.ffw_sorting_data();\n\n        },\n\n        hideDiscountNotice: function(e) {\n            e.preventDefault();\n\n            console.log(\"Discounted...\");\n\n            let nonce = ffw_admin.nonce;\n\n            //data\n            let data = {\n                nonce: nonce,\n            };\n\n            wp.ajax.post( 'ffw_hide_discount_notice', {\n                data: data\n            } ).then( response => {\n                console.log(response);\n            } ).fail( error => {\n                console.log('erorr during discounted notice dismissal.......');\n            } );\n\n        },\n        openPopupForm: function(e) {\n            e.preventDefault();\n\n            $('#ffw_modal_submit').show();\n            $('#ffw_modal_update').hide();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus();\n            }, 500);\n\n            //reset question and answers\n            $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').val('');\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent('');\n            }\n        },\n        closePopupForm: function(e) {\n            e.preventDefault();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.removeClass('state-show');\n            $modal.removeClass('state-appear').addClass('state-leave');\n\t\t},\n        toggleOptionMetabox: function (e) {\n            e.preventDefault();\n\n            $( this ).parent( '.ffw-metabox' ).toggleClass( 'closed' ).toggleClass( 'open' );\n\n            // If the user clicks on some form input inside the h3, the box should not be toggled\n            if ( $( event.target ).filter( ':input, .ffw-sort, .ffw-handle-item' ).length ) {\n                return;\n            }\n\n            $( this ).next( '.ffw-metabox-content' ).stop().slideToggle();\n        },\n        submitModalForm: function (e) {\n            e.preventDefault();\n\n            //hide the popup\n            $('.ffw-modal-frame').removeClass('state-appear');\n            $('.modal-overlay ').removeClass('state-show');\n\n            //show loader\n            $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n            let ffw_answer_text = '';\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                ffw_answer_text =  tinyMCE.activeEditor.getContent();\n            }\n            let __ffw_product_id        = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs     = $('#ffw_products').val();\n                __ffw_products_faqs     = JSON.parse(__ffw_products_faqs);\n\n            let nonce = ffw_admin.nonce;\n            let ffw_question_val  = __ffw_question.val();\n\n            //insert faq's data\n            let faq_data = {\n                'question': ffw_question_val,\n                'answer': ffw_answer_text,\n                'product_id': __ffw_product_id,\n                'faq_list': __ffw_products_faqs,\n            };\n\n            wp.ajax.post( 'ffw_insert_new_faq', {\n                nonce: nonce,\n                faq_data: faq_data,\n            } ).then( response => {\n                $('#ffw_products').val(JSON.stringify(response.faq_data));\n                $('.ffw-body').html(response.faq);\n                $('.ffw-popup-form-add-question').val('');\n                $('.ffw-popup-form-add-answer').val('');\n\n                //hide loader\n                $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n            } );\n\n        },\n        deleteAllFaq: function (e) {\n            e.preventDefault();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n\n            let total_product = '';\n            if( undefined === __ffw_products_faqs || 0 === __ffw_products_faqs.length ) {\n                console.log(__ffw_products_faqs);\n                total_product = 0;\n            }\n\n            //insert faq's data\n            let faq_delete_data = {\n                'product_id': __ffw_product_id\n            };\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Delete all the faqs?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    wp.ajax.post( 'ffw_delete_all_faqs', {\n                        nonce: nonce,\n                        faq_delete_data: faq_delete_data,\n                    }).then( response => {\n\n                        if(response.success) {\n                            //item hide\n                            $('.ffw-metabox-item').hide();\n\n                            //make current faqs data empty\n                            $('#ffw_products').val(JSON.stringify([]));\n\n                            const Toast = Swal.mixin({\n                                toast: true,\n                                position: 'bottom-end',\n                                showConfirmButton: false,\n                                timer: 1500,\n                                timerProgressBar: true,\n                                didOpen: (toast) => {\n                                    toast.addEventListener('mouseenter', Swal.stopTimer);\n                                    toast.addEventListener('mouseleave', Swal.resumeTimer);\n                                }\n                            });\n\n                            Toast.fire({\n                                icon: 'success',\n                                title: 'Delete successfull.'\n                            });\n                        }\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        deleteSingleFaq: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n            let current_faq = $(this).parents('.ffw-metabox-item');\n            let current_faq_id = $(this).attr('rel');\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Are you sure to Delete?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    const index = __ffw_products_faqs.indexOf(current_faq_id);\n                    if (index > -1) {\n                        __ffw_products_faqs.splice(index, 1);\n                    }\n\n                    //update faq's data\n                    let faq_updated_data = {\n                        'product_id': __ffw_product_id,\n                        'updated_faq_list': __ffw_products_faqs\n                    };\n\n                    //hide current faq\n                    current_faq.hide();\n\n                    wp.ajax.post( 'ffw_delete_single_faq', {\n                        nonce: nonce,\n                        faq_updated_data: faq_updated_data,\n                    }).then( response => {\n                        console.log('success.......');\n                        console.log(response);\n                        console.log(JSON.stringify(response.update_faq_list));\n                        $('#ffw_products').val(JSON.stringify(response.update_faq_list));\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        openUpdatePopupForm: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            $('#ffw_modal_submit').hide();\n            $('#ffw_modal_update').show();\n\n            //open modal\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            let __ffw_id = $(this).attr('rel');\n                $('#ffw-current-ques-id').val(__ffw_id);\n            let __ffw_old_question = $(this).parent('h3').find('strong').html();\n            let __ffw_old_answer = $(this).parents('.ffw-metabox-item').find('.ffw-metabox-content .data div').html();\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n                __ffw_question.val(__ffw_old_question);\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus().putCursorAtEnd();\n            }, 500);\n\n            //set value for answer\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent(__ffw_old_answer);\n            }\n        },\n        changePreviewImage: function(e) {\n            let current_image = $(this).val();\n\n            $('.ffw-setting-layout img').each(function(item) {\n               let image_layout = $(this).data('layout');\n               if( image_layout === parseInt(current_image) ) {\n                   $(this).removeClass('ffw-hide').addClass('ffw-visible');\n               }else {\n                   $(this).removeClass('ffw-visible').addClass('ffw-hide');\n               }\n            });\n        },\n        changeQuestionRange: function(e) {\n            let question_range_val = $(this).val();\n            $('.ffw_question_font_size_label').text(question_range_val + \"px\");\n        },\n        changeAnswerRange: function(e) {\n            let answer_range_val = $(this).val();\n            $('.ffw_answer_font_size_label').text(answer_range_val + \"px\");\n        },\n        ffw_sorting_data: function(e) {\n\n            // Allow FAQ sorting\n            $( '.ffw-sortable' ).sortable({\n                cursor:               'move',\n                axis:                 'y',\n                handle:               '.ffw-sort-icon',\n                scrollSensitivity:    40,\n                forcePlaceholderSize: true,\n                helper:               'clone',\n                opacity:              0.65,\n                stop:                 function() {\n                    var selectedData = [];\n                    $('.ffw-sortable .ffw-metabox-item').each(function() {\n                        selectedData.push($(this).attr(\"id\"));\n                    });\n                    $.faq_woocommerce.ffw_sortable(selectedData);\n                }\n            });\n        },\n        ffw_sortable: function(data) {\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let nonce               = ffw_admin.nonce;\n\n            //sort faq's data\n            let faq_data = {\n                'product_id': __ffw_product_id,\n                'faq_sorted_list': data,\n            };\n\n            wp.ajax.post( 'ffw_sort_faq_data', {\n                nonce: nonce,\n                faq_sorted_data: faq_data,\n            } ).then( response => {\n                console.log('success.......');\n                console.log(response.message);\n                $('#ffw_products').val(JSON.stringify(data));\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n            } );\n        },\n        showProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').removeClass('ffw-hide');\n\t\t},\n        hideProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').addClass('ffw-hide');\n\t\t},\n        showTemplatePopup: function(e){\n            e.preventDefault();\n\n            // get & show image url in the popup\n            var img_url = $(this).parents('.ffw-item-wrapper').find('.ffw-layout-img img').attr('src');\n            $('.ffw-template-popup-inner img').attr('src', img_url);\n\n            // control body overflow not to scroll\n            $('body').addClass('ffw-overflow-hidden');\n\n            // activate the popup\n            $(\".ffw-active\").removeClass(\"ffw-active\");\n            $(\".ffw-template-popup-wrapper\").addClass(\"ffw-active\");\n        },\n        hideTemplatePopup: function(e){\n            e.preventDefault();\n\n            // reset body overflow\n            $('body').removeClass('ffw-overflow-hidden');\n\n            $(\".ffw-template-popup-wrapper\").removeClass(\"ffw-active\");\n        },\n        activateTemplate: function(e){\n            e.preventDefault();\n\n            $('.ffw-item-wrapper').removeClass('ffw-template-active');\n            $(this).parents('.ffw-item-wrapper').addClass('ffw-template-active');\n\n            var template_id = $(this).data('templte_id');\n            let nonce       = ffw_admin.nonce;\n\n            //set to hidden layout field\n            $('input[name=\"ffw_general_settings[ffw_layout]\"]').val(template_id);\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    data: {\n                        action: 'ffw_activate_template',\n                        nonce: nonce,\n                        template_id: template_id,\n                    }\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log('success.......');\n                }\n            );\n        },\n        ai_faqs_select_all: function(e) {\n            console.log('ai_faqs_select_all');\n            let ai_result_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]');\n\n            console.log(ai_result_checkbox);\n            \n            if(e.target.checked) {\n                ai_result_checkbox.attr('checked', true);\n            }else{\n                ai_result_checkbox.attr('checked', false);\n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_faqs_selected_item_count: function(e) {\n            let ai_selected_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]:checked');\n            let item_count_text = $('.ffw-ai-selected-count');\n\n            console.log(ai_selected_checkbox);\n\n            if(ai_selected_checkbox.length > 0) {\n                let items_count = ai_selected_checkbox.length + ' Items Selected';\n                item_count_text.text(items_count);\n            }else {\n                console.log(ffw_admin.strings.ai_item_selected);\n                item_count_text.text(ffw_admin.strings.ai_item_selected);\n            }\n        },\n        ai_faqs_on_select: function(e) {\n            if(e.target.checked) {\n                \n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_back_to: function(e) {\n            e.preventDefault();\n\n            $('.ffw-ai-result-content').hide();\n\n            let submitBtn = document.querySelector('.ffw-ai-faqs-form button[type=submit] span');\n            submitBtn.innerText = 'Generate FAQs';\n\n            $('.ffw-ai-form-content').fadeIn();\n        },\n        ai_faqs_generator: function(e) {\n            e.preventDefault();\n\n            const formData = new FormData(e.target);\n            let nonce      = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span');\n            submitBtn.innerText = 'Generating...';\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_generate_ai_faqs\");\n            formData.append(\"nonce\", nonce);\n\n            console.log('ai faqs generation..');\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log(response);\n\n                    if(response.data.html.length > 0) {\n                        $('.ffw-ai-result-fields').html(response.data.html);\n                        $('.ffw-ai-form-content').fadeOut();\n\n                        $('.ffw-ai-result-content-header h3').text('10 results for \"' + response.data.product_title + '\"');\n\n                        $('.ffw-ai-result-content').addClass('ffw-ai-result-content-active');\n                    }\n\n                    if(response.data.product_id) {\n                        $('.ffw-ai-result-form').attr('product_id', response.data.product_id);\n                    }\n                }\n            );\n        },\n        ai_faqs_insert: function(e) {\n            e.preventDefault();\n\n            const formData  = new FormData(e.target);\n            let nonce       = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span:last-child');\n            submitBtn.innerText = 'Inserting...';\n\n            let product_id = $('.ffw-ai-result-form').attr('product_id');\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_insert_ai_faqs\");\n            formData.append(\"ffw_insert_ai_product_id\", product_id);\n            formData.append(\"nonce\", nonce);\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    if(response.success) {\n                        window.location.href = ffw_admin.faw_list_page_url;\n                    }\n                }\n            );\n        }\n\n\t};\n\n\n\t$.faq_woocommerce.init();\n});\n"]}