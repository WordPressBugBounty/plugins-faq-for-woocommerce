{"version":3,"sources":["faq-woocommerce-admin.js"],"names":["jQuery","document","ready","$","fn","putCursorAtEnd","this","setTimeout","$el","focus","is","el","length","len","val","setSelectionRange","scrollTop","faq_woocommerce","placeholder","ajax_url","ffw_admin","select2","nonce","$modal","search_dom","allowClear","minimumResultsForSearch","new_item_id","__ffw_products_faqs","e","__ffw_product_id","post","JSON","parse","addClass","ffw_sorting_data","response","then","error","console","stringify","removeClass","html","sortable","trigger","fail","current_page_action","axis","update","event","data","log","on","openPopupForm","wpColorPicker","closePopupForm","bind","hasClass","hideDiscountNotice","toggleOptionMetabox","preventDefault","submitModalForm","deleteAllFaq","deleteSingleFaq","openUpdatePopupForm","changePreviewImage","changeAnswerRange","showProPopup","showTemplatePopup","hideTemplatePopup","activateTemplate","ai_faqs_select_all","ai_faqs_on_select","ai_back_to","ai_faqs_generator","$overlay","ai_faqs_insert","wp","parent","ffw_answer_text","setContent","ffw_question_val","target","filter","next","slideToggle","__ffw_question","tinyMCE","activeEditor","ajax","total_product","showCancelButton","position","didOpen","faq_delete_data","undefined","Swal","fire","icon","isConfirm","current_faq_id","isConfirmed","Toast","mixin","showConfirmButton","toast","addEventListener","stopTimer","resumeTimer","__ffw_id","attr","parents","__ffw_old_question","title","__ffw_old_answer","index","indexOf","splice","faq_updated_data","image_layout","parseInt","forcePlaceholderSize","show","selectedData","find","ffw_sortable","faq_data","faq_sorted_data","get","current_image","each","item","question_range_val","text","answer_range_val","img_url","cursor","opacity","stop","method","template_id","ai_result_checkbox","checked","ai_faqs_selected_item_count","item_count_text","ai_selected_checkbox","formData","append","processData","url","contentType","done","submitBtn","product_id","dataType","items_count","strings","hide","querySelector","fadeIn","FormData","fadeOut","product_title","window","location","href","init"],"mappings":"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","file":"faq-woocommerce-admin.min.js","sourcesContent":["/**\n * Woocommerce FAQ Admin JS\n *\n * Copyright (c) 2019 wpfeel\n * Licensed under the GPLv2+ license.\n */\njQuery(document).ready(function ($) {\n\t'use strict';\n\n    jQuery.fn.putCursorAtEnd = function() {\n\n        return this.each(function() {\n\n            // Cache references\n            var $el = $(this),\n                el = this;\n\n            // Only focus if input isn't already\n            if (!$el.is(\":focus\")) {\n                $el.focus();\n            }\n\n            // If this function exists... (IE 9+)\n            if (el.setSelectionRange) {\n\n                // Double the length because Opera is inconsistent about whether a carriage return is one character or two.\n                var len = $el.val().length * 2;\n\n                // Timeout seems to be required for Blink\n                setTimeout(function() {\n                    el.setSelectionRange(len, len);\n                }, 1);\n\n            } else {\n\n                // As a fallback, replace the contents with itself\n                // Doesn't work in Chrome, but Chrome supports setSelectionRange\n                $el.val($el.val());\n\n            }\n\n            // Scroll to the bottom, in case we're in a tall textarea\n            // (Necessary for Firefox and Chrome)\n            this.scrollTop = 999999;\n\n        });\n\n    };\n\n\t$.faq_woocommerce = {\n        ajax_url: '',\n\t\tinit: function () {\n            //assign ajax url\n            this.ajax_url = ffw_admin.ajaxurl;\n\n            // modal form\n            var $modal = $('#ffw-popup-form-wrapper .ffw-modal-frame');\n\n            // init select2\n            $('.ffw-category-select2').select2({\n                placeholder: \"Select categories\",\n                // allowClear: true\n            });\n            \n            $('.ffw-tag-select2').select2({\n                placeholder: \"Select tags\",\n                // allowClear: true\n            });\n\n            if( \"product\" === ffw_admin.current_post_type && \"edit\" === ffw_admin.current_page_action ) {\n\n                //ffw select2 init\n                let search_dom = $('.ffw_search');\n                search_dom.select2({\n                    placeholder: \"Select a faq post\",\n                    allowClear: true,\n                    minimumResultsForSearch: Infinity\n                });\n\n                search_dom.on(\"select2:select\", function(e) {\n                    // console.log(\"hello puishak\");\n\n                    let __ffw_product_id    = $('#ffw_product_page_id').val();\n                    let nonce               = ffw_admin.nonce;\n                    let new_item_id         = $(this).val();\n                    let __ffw_products_faqs  = $('#ffw_products').val();\n                    __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n\n                    //show loader\n                    $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n                    //insert faq's data from search\n                    let faq_data = {\n                        'product_id': __ffw_product_id,\n                        'new_item_id': new_item_id,\n                        'product_faqs': __ffw_products_faqs,\n                    };\n\n                    wp.ajax.post( 'ffw_insert_data_from_search', {\n                        nonce: nonce,\n                        faq_insert_search_data: faq_data,\n                    } ).then( response => {\n                        console.log('success.......');\n                        console.log(response.message);\n                        console.log(response.updated_data);\n                        $('#ffw_products').val(JSON.stringify(response.updated_data));\n                        $('.ffw-body').html(response.faq_body);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // FAQ sorting\n                        $.faq_woocommerce.ffw_sorting_data();\n\n                        // reset\n                        search_dom.val('').trigger('change');\n\n                    } ).fail( error => {\n                        console.log('erorr.......');\n                        console.log(error);\n\n                        //hide loader\n                        $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                        // reset\n                        search_dom.val('').trigger('change');\n                    } );\n                });\n\n                //ffw sortable\n                $(\".ffw-sortable\").sortable({\n                    axis: 'y',\n                    update : function (event, ui) {\n                        var data = $(this).sortable('serialize');\n                        console.log(data);\n\n                    }\n                });\n            }\n\n            //ffw select2 init\n            if( ffw_admin.current_page_action ) {\n                console.log(ffw_admin.current_page_action);\n            }\n            let search_dom = $('.ffw-role-select');\n            search_dom.select2({\n                placeholder: \"Select Roles\",\n                allowClear: true,\n            });\n\n            //modal js\n            $(document).on('click', '#ffw-product-form-header .ffw-add-new', this.openPopupForm);\n            $(document).on('click', '#ffw-popup-form-wrapper .ffw-modal-close, #ffw-popup-form-wrapper input[type=\"button\"]', this.closePopupForm);\n            $modal.bind('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e){\n                if($modal.hasClass('state-leave')) {\n                  $modal.removeClass('state-leave');\n                }\n            });\n\n            //onchange popup answer, update answer textarea value\n            // wp.editor.initialize('#ffw_popup_answer', {\n            //     setup: function (editor) {\n            //         editor.on('change', function () {\n            //             editor.save();\n            //         });\n            //     }\n            // });\n\n\n            //style inputs as color picker\n            $('.ffw_question_text_color').wpColorPicker();\n            $('.ffw_question_bg_color').wpColorPicker();\n            $('.ffw_question_bg_secondary_color').wpColorPicker();\n            $('.ffw_question_border_color').wpColorPicker();\n            $('.ffw_answer_text_color').wpColorPicker();\n            $('.ffw_answer_bg_color').wpColorPicker();\n            $('.ffw_answer_border_color').wpColorPicker();\n            $('.ffw-comments-date-time-color').wpColorPicker();\n            $('.ffw-comments-content-color').wpColorPicker();\n            $('.ffw-comments-author-name-color').wpColorPicker();\n            $('.ffw-comments-submit-button-text-color').wpColorPicker();\n            $('.ffw-comments-reply-button-text-color').wpColorPicker();\n            $('.ffw-comments-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-form-border-color').wpColorPicker();\n            $('.ffw-comments-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-title-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-bg-color').wpColorPicker();\n            $('.ffw-comments-reply-form-border-color').wpColorPicker();\n            $('.ffw-comments-reply-form-submit-button-text-color').wpColorPicker();\n\n            //metabox option js\n            $(document).on('click', '#ffw_product_data .ffw-metabox h3', this.toggleOptionMetabox);\n            $(document).on('click', '#ffw_modal_submit', this.submitModalForm);\n            $(document).on('click', '#ffw-delete-all-faq', this.deleteAllFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-delete-btn', this.deleteSingleFaq);\n            $(document).on('click', '#ffw-product-form-header .ffw-single-edit-btn', this.openUpdatePopupForm);\n            $(document).on('click', '.ffw-layout-select', this.changePreviewImage);\n            $(document).on('change', '.ffw_question_font_size', this.changeQuestionRange);\n            $(document).on('change', '.ffw_answer_font_size', this.changeAnswerRange);\n            $(document).on('click', '.ffw-setting-wrapper .ffw-get-pro-wrapper', this.showProPopup);\n            $(document).on('click', '#ffw-popup-close', this.hideProPopup);\n            $(document).on('click', '.ffw-discount-notice .notice-dismiss', this.hideDiscountNotice);\n\n            $(document).on('click', '.ffw-template-preview-button', this.showTemplatePopup);\n            $(document).on('click', '.ffw-template-popup-close-button', this.hideTemplatePopup);\n            $(document).on('click', '.ffw-template-active-button', this.activateTemplate);\n\n            //AI FAQs events.\n            $(document).on('click', '.ffw-ai-result-select-all-btn', this.ai_faqs_select_all);\n            $(document).on('click', '.ffw-ai-result-item-group input[type=checkbox]', this.ai_faqs_on_select);\n            $(document).on('click', '.ffw-ai-back-btn', this.ai_back_to);\n            $(document).on('submit', '.ffw-ai-faqs-form', this.ai_faqs_generator);\n            $(document).on('submit', '.ffw-ai-result-form', this.ai_faqs_insert);\n\n            // FAQ sorting.\n            this.ffw_sorting_data();\n\n        },\n\n        hideDiscountNotice: function(e) {\n            e.preventDefault();\n\n            console.log(\"Discounted...\");\n\n            let nonce = ffw_admin.nonce;\n\n            //data\n            let data = {\n                nonce: nonce,\n            };\n\n            wp.ajax.post( 'ffw_hide_discount_notice', {\n                data: data\n            } ).then( response => {\n                console.log(response);\n            } ).fail( error => {\n                console.log('erorr during discounted notice dismissal.......');\n            } );\n\n        },\n        openPopupForm: function(e) {\n            e.preventDefault();\n\n            $('#ffw_modal_submit').show();\n            $('#ffw_modal_update').hide();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus();\n            }, 500);\n\n            //reset question and answers\n            $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').val('');\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent('');\n            }\n        },\n        closePopupForm: function(e) {\n            e.preventDefault();\n\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.removeClass('state-show');\n            $modal.removeClass('state-appear').addClass('state-leave');\n\t\t},\n        toggleOptionMetabox: function (e) {\n            e.preventDefault();\n\n            $( this ).parent( '.ffw-metabox' ).toggleClass( 'closed' ).toggleClass( 'open' );\n\n            // If the user clicks on some form input inside the h3, the box should not be toggled\n            if ( $( event.target ).filter( ':input, .ffw-sort, .ffw-handle-item' ).length ) {\n                return;\n            }\n\n            $( this ).next( '.ffw-metabox-content' ).stop().slideToggle();\n        },\n        submitModalForm: function (e) {\n            e.preventDefault();\n\n            //hide the popup\n            $('.ffw-modal-frame').removeClass('state-appear');\n            $('.modal-overlay ').removeClass('state-show');\n\n            //show loader\n            $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n            let ffw_answer_text = '';\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                ffw_answer_text =  tinyMCE.activeEditor.getContent();\n            }\n            let __ffw_product_id        = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs     = $('#ffw_products').val();\n                __ffw_products_faqs     = JSON.parse(__ffw_products_faqs);\n\n            let nonce = ffw_admin.nonce;\n            let ffw_question_val  = __ffw_question.val();\n\n            //insert faq's data\n            let faq_data = {\n                'question': ffw_question_val,\n                'answer': ffw_answer_text,\n                'product_id': __ffw_product_id,\n                'faq_list': __ffw_products_faqs,\n            };\n\n            wp.ajax.post( 'ffw_insert_new_faq', {\n                nonce: nonce,\n                faq_data: faq_data,\n            } ).then( response => {\n                $('#ffw_products').val(JSON.stringify(response.faq_data));\n                $('.ffw-body').html(response.faq);\n                $('.ffw-popup-form-add-question').val('');\n                $('.ffw-popup-form-add-answer').val('');\n\n                //hide loader\n                $('#ffw_product_data .ffw-product-loader').removeClass('ffw-visible');\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n\n                // FAQ sorting\n                $.faq_woocommerce.ffw_sorting_data();\n            } );\n\n        },\n        deleteAllFaq: function (e) {\n            e.preventDefault();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n\n            let total_product = '';\n            if( undefined === __ffw_products_faqs || 0 === __ffw_products_faqs.length ) {\n                console.log(__ffw_products_faqs);\n                total_product = 0;\n            }\n\n            //insert faq's data\n            let faq_delete_data = {\n                'product_id': __ffw_product_id\n            };\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Delete all the faqs?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    wp.ajax.post( 'ffw_delete_all_faqs', {\n                        nonce: nonce,\n                        faq_delete_data: faq_delete_data,\n                    }).then( response => {\n\n                        if(response.success) {\n                            //item hide\n                            $('.ffw-metabox-item').hide();\n\n                            //make current faqs data empty\n                            $('#ffw_products').val(JSON.stringify([]));\n\n                            const Toast = Swal.mixin({\n                                toast: true,\n                                position: 'bottom-end',\n                                showConfirmButton: false,\n                                timer: 1500,\n                                timerProgressBar: true,\n                                didOpen: (toast) => {\n                                    toast.addEventListener('mouseenter', Swal.stopTimer);\n                                    toast.addEventListener('mouseleave', Swal.resumeTimer);\n                                }\n                            });\n\n                            Toast.fire({\n                                icon: 'success',\n                                title: 'Delete successfull.'\n                            });\n                        }\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        deleteSingleFaq: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let __ffw_products_faqs  = $('#ffw_products').val();\n                __ffw_products_faqs = JSON.parse(__ffw_products_faqs);\n            let nonce = ffw_admin.nonce;\n            let current_faq = $(this).parents('.ffw-metabox-item');\n            let current_faq_id = $(this).attr('rel');\n\n            //delete confirm popup\n            Swal.fire({\n                title: 'Are you sure to Delete?',\n                icon: 'question',\n                showCancelButton: true,\n            }).then(function(isConfirm) {\n\n                if (isConfirm.isConfirmed) {\n\n                    const index = __ffw_products_faqs.indexOf(current_faq_id);\n                    if (index > -1) {\n                        __ffw_products_faqs.splice(index, 1);\n                    }\n\n                    //update faq's data\n                    let faq_updated_data = {\n                        'product_id': __ffw_product_id,\n                        'updated_faq_list': __ffw_products_faqs\n                    };\n\n                    //hide current faq\n                    current_faq.hide();\n\n                    wp.ajax.post( 'ffw_delete_single_faq', {\n                        nonce: nonce,\n                        faq_updated_data: faq_updated_data,\n                    }).then( response => {\n                        console.log('success.......');\n                        console.log(response);\n                        console.log(JSON.stringify(response.update_faq_list));\n                        $('#ffw_products').val(JSON.stringify(response.update_faq_list));\n\n                    }).fail( error => {\n                        console.log('erorr of delete faq.......');\n                        console.log(error);\n                    });\n\n                }\n            });\n\n        },\n        openUpdatePopupForm: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            $('#ffw_modal_submit').hide();\n            $('#ffw_modal_update').show();\n\n            //open modal\n            var $modal = $('.ffw-modal-frame');\n            var $overlay = $('.modal-overlay');\n            $overlay.addClass('state-show');\n            $modal.removeClass('state-leave').addClass('state-appear');\n\n            let __ffw_id = $(this).attr('rel');\n                $('#ffw-current-ques-id').val(__ffw_id);\n            let __ffw_old_question = $(this).parent('h3').find('strong').html();\n            let __ffw_old_answer = $(this).parents('.ffw-metabox-item').find('.ffw-metabox-content .data div').html();\n            let __ffw_question  = $('#ffw-popup-form-wrapper .ffw-popup-form-add-question');\n                __ffw_question.val(__ffw_old_question);\n\n            //focus input\n            setTimeout(function() {\n                $('#ffw-popup-form-wrapper .ffw-popup-form-add-question').focus().putCursorAtEnd();\n            }, 500);\n\n            //set value for answer\n            if ( jQuery(\"#wp-ffw_popup_answer-wrap\").hasClass(\"tmce-active\") ) {\n                tinymce.get(\"ffw_popup_answer\").setContent(__ffw_old_answer);\n            }\n        },\n        changePreviewImage: function(e) {\n            let current_image = $(this).val();\n\n            $('.ffw-setting-layout img').each(function(item) {\n               let image_layout = $(this).data('layout');\n               if( image_layout === parseInt(current_image) ) {\n                   $(this).removeClass('ffw-hide').addClass('ffw-visible');\n               }else {\n                   $(this).removeClass('ffw-visible').addClass('ffw-hide');\n               }\n            });\n        },\n        changeQuestionRange: function(e) {\n            let question_range_val = $(this).val();\n            $('.ffw_question_font_size_label').text(question_range_val + \"px\");\n        },\n        changeAnswerRange: function(e) {\n            let answer_range_val = $(this).val();\n            $('.ffw_answer_font_size_label').text(answer_range_val + \"px\");\n        },\n        ffw_sorting_data: function(e) {\n\n            // Allow FAQ sorting\n            $( '.ffw-sortable' ).sortable({\n                cursor:               'move',\n                axis:                 'y',\n                handle:               '.ffw-sort-icon',\n                scrollSensitivity:    40,\n                forcePlaceholderSize: true,\n                helper:               'clone',\n                opacity:              0.65,\n                stop:                 function() {\n                    var selectedData = [];\n                    $('.ffw-sortable .ffw-metabox-item').each(function() {\n                        selectedData.push($(this).attr(\"id\"));\n                    });\n                    $.faq_woocommerce.ffw_sortable(selectedData);\n                }\n            });\n        },\n        ffw_sortable: function(data) {\n            let __ffw_product_id    = $('#ffw_product_page_id').val();\n            let nonce               = ffw_admin.nonce;\n\n            //sort faq's data\n            let faq_data = {\n                'product_id': __ffw_product_id,\n                'faq_sorted_list': data,\n            };\n\n            wp.ajax.post( 'ffw_sort_faq_data', {\n                nonce: nonce,\n                faq_sorted_data: faq_data,\n            } ).then( response => {\n                console.log('success.......');\n                console.log(response.message);\n                $('#ffw_products').val(JSON.stringify(data));\n\n            } ).fail( error => {\n                console.log('erorr.......');\n                console.log(error);\n            } );\n        },\n        showProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').removeClass('ffw-hide');\n\t\t},\n        hideProPopup: function(e) {\n            e.preventDefault();\n\n            $('.ffw-go-pro-modal').addClass('ffw-hide');\n\t\t},\n        showTemplatePopup: function(e){\n            e.preventDefault();\n\n            // get & show image url in the popup\n            var img_url = $(this).parents('.ffw-item-wrapper').find('.ffw-layout-img img').attr('src');\n            $('.ffw-template-popup-inner img').attr('src', img_url);\n\n            // control body overflow not to scroll\n            $('body').addClass('ffw-overflow-hidden');\n\n            // activate the popup\n            $(\".ffw-active\").removeClass(\"ffw-active\");\n            $(\".ffw-template-popup-wrapper\").addClass(\"ffw-active\");\n        },\n        hideTemplatePopup: function(e){\n            e.preventDefault();\n\n            // reset body overflow\n            $('body').removeClass('ffw-overflow-hidden');\n\n            $(\".ffw-template-popup-wrapper\").removeClass(\"ffw-active\");\n        },\n        activateTemplate: function(e){\n            e.preventDefault();\n\n            $('.ffw-item-wrapper').removeClass('ffw-template-active');\n            $(this).parents('.ffw-item-wrapper').addClass('ffw-template-active');\n\n            var template_id = $(this).data('templte_id');\n            let nonce       = ffw_admin.nonce;\n\n            //set to hidden layout field\n            $('input[name=\"ffw_general_settings[ffw_layout]\"]').val(template_id);\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    data: {\n                        action: 'ffw_activate_template',\n                        nonce: nonce,\n                        template_id: template_id,\n                    }\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log('success.......');\n                }\n            );\n        },\n        ai_faqs_select_all: function(e) {\n            console.log('ai_faqs_select_all');\n            let ai_result_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]');\n\n            console.log(ai_result_checkbox);\n            \n            if(e.target.checked) {\n                ai_result_checkbox.attr('checked', true);\n            }else{\n                ai_result_checkbox.attr('checked', false);\n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_faqs_selected_item_count: function(e) {\n            let ai_selected_checkbox = $('.ffw-ai-result-item-group input[type=checkbox]:checked');\n            let item_count_text = $('.ffw-ai-selected-count');\n\n            console.log(ai_selected_checkbox);\n\n            if(ai_selected_checkbox.length > 0) {\n                let items_count = ai_selected_checkbox.length + ' Items Selected';\n                item_count_text.text(items_count);\n            }else {\n                console.log(ffw_admin.strings.ai_item_selected);\n                item_count_text.text(ffw_admin.strings.ai_item_selected);\n            }\n        },\n        ai_faqs_on_select: function(e) {\n            if(e.target.checked) {\n                \n            }\n\n            $.faq_woocommerce.ai_faqs_selected_item_count();\n        },\n        ai_back_to: function(e) {\n            e.preventDefault();\n\n            $('.ffw-ai-result-content').hide();\n\n            let submitBtn = document.querySelector('.ffw-ai-faqs-form button[type=submit] span');\n            submitBtn.innerText = 'Generate FAQs';\n\n            $('.ffw-ai-form-content').fadeIn();\n        },\n        ai_faqs_generator: function(e) {\n            e.preventDefault();\n\n            const formData = new FormData(e.target);\n            let nonce      = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span');\n            submitBtn.innerText = 'Generating...';\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_generate_ai_faqs\");\n            formData.append(\"nonce\", nonce);\n\n            console.log('ai faqs generation..');\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    console.log(response);\n\n                    if(response.data.html.length > 0) {\n                        $('.ffw-ai-result-fields').html(response.data.html);\n                        $('.ffw-ai-form-content').fadeOut();\n\n                        $('.ffw-ai-result-content-header h3').text('10 results for \"' + response.data.product_title + '\"');\n\n                        $('.ffw-ai-result-content').addClass('ffw-ai-result-content-active');\n                    }\n\n                    if(response.data.product_id) {\n                        $('.ffw-ai-result-form').attr('product_id', response.data.product_id);\n                    }\n                }\n            );\n        },\n        ai_faqs_insert: function(e) {\n            e.preventDefault();\n\n            const formData  = new FormData(e.target);\n            let nonce       = ffw_admin.nonce;\n\n            let submitBtn   = e.target.querySelector('button[type=submit] span:last-child');\n            submitBtn.innerText = 'Inserting...';\n\n            let product_id = $('.ffw-ai-result-form').attr('product_id');\n\n            //add action hook to the form data\n            formData.append(\"action\", \"ffw_insert_ai_faqs\");\n            formData.append(\"ffw_insert_ai_product_id\", product_id);\n            formData.append(\"nonce\", nonce);\n\n            //show loader\n            // $('#ffw_product_data .ffw-product-loader').addClass('ffw-visible');\n\n            $.ajax(\n                {\n                    method: \"POST\",\n                    url: ffw_admin.ajaxurl,\n                    dataType: \"json\",\n                    processData : false,\n                    contentType: false,\n                    data: formData,\n                }\n            )\n            .done(\n                function ( response ) {\n                    if(response.success) {\n                        window.location.href = ffw_admin.faw_list_page_url;\n                    }\n                }\n            );\n        }\n\n\t};\n\n\n\t$.faq_woocommerce.init();\n});\n"]}